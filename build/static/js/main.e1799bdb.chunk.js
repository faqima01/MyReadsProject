(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(39)},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),c=a.n(o),l=a(6),s=a(16),i=a(15),u=a(9),h=a(10),m=a(12),f=a(11),d=a(13),b=a(18),v="https://reactnd-books-api.udacity.com",p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));var E={Accept:"application/json",Authorization:p},k=a(0),y=(a(8),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(e){var t,a,n={id:this.props.bookID},r=e.target.value;(t=n,a=r,fetch("".concat(v,"/books/").concat(t.id),{method:"PUT",headers:Object(b.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:a})}).then(function(e){return e.json()})).then(function(e){return console.log("Successfully moved the book!")}).catch(function(e){return console.log("Failed to move the book!")})}},{key:"render",value:function(){var e=this,t=this.props.currentShelf;return r.a.createElement("div",null,r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{onChange:function(t){return e.handleSubmit(t)},defaultValue:t},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None"))))}}]),t}(n.Component));var g=function(e){var t=e.bookProperties,a=t.name,n=t.authors,o=t.image,c=t.ID,l=t.currentShelf;return r.a.createElement("div",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},o&&r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url('".concat(o,"')")}}),r.a.createElement(y,{bookID:c,currentShelf:l})),r.a.createElement("div",{className:"book-title"},a),n&&n.map(function(e,t){return r.a.createElement("div",{className:"book-authors",key:t},e," ",r.a.createElement("br",null))})))};var j=function(e){var t=e.shelfTitle,a=e.shelfBooks;return r.a.createElement("div",null,r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},t),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(g,{bookProperties:e}))}))))))};var O=function(e){var t=e.currentlyReading,a=e.wantToRead,n=e.read;return r.a.createElement("div",null,r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement(j,{shelfTitle:"Currently Reading",shelfBooks:t}),r.a.createElement(j,{shelfTitle:"Want to Read",shelfBooks:a}),r.a.createElement(j,{shelfTitle:"Read",shelfBooks:n}),r.a.createElement("div",{className:"open-search"},r.a.createElement(l.b,{to:"/search"},r.a.createElement("button",null,"Add a book"))))};var S=function(e){var t=e.searchResults;return r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},t.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(g,{bookProperties:e}))})))},R=a(25);function N(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==a.return||a.return()}finally{if(l)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={searchResults:[]},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"search",value:function(e){var t,a=this;""===e?this.setState({searchResults:[]}):(t=e.trim(),fetch("".concat(v,"/search"),{method:"POST",headers:Object(b.a)({},E,{"Content-Type":"application/json"}),body:JSON.stringify({query:t})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){a.setState({searchResults:[]}),e.forEach(function(e){var t,n="none",r=N(a.props.shelfedBooks);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.ID===e.id&&(n=o.currentShelf)}}catch(l){r.e(l)}finally{r.f()}var c={name:e.title,authors:e.authors,image:e.imageLinks.smallThumbnail,ID:e.id,currentShelf:n};a.setState(function(e){return{searchResults:e.searchResults.concat([c])}})})}).catch(function(){return console.log("The book was either missing thumbnail or author. We filtered them out.")})}},{key:"render",value:function(){var e=this,t=this.state.searchResults;return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{className:"close-search"},"Close")),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",ref:function(t){e.textInput=t},onChange:Object(R.a)(500,function(){return e.search(e.textInput.value)})}))),r.a.createElement(S,{searchResults:t}))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={currentlyReading:[],wantToRead:[],read:[]},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(v,"/books"),{headers:E}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){t.forEach(function(t){var a=t.shelf,n={name:t.title,authors:t.authors,image:t.imageLinks.smallThumbnail,ID:t.id,currentShelf:a};e.setState(function(e){return Object(i.a)({},a,e[[a]].concat([n]))})})})}},{key:"render",value:function(){var e=this.state,t=e.currentlyReading,a=e.wantToRead,n=e.read,o=[].concat(Object(s.a)(t),Object(s.a)(a),Object(s.a)(n));return r.a.createElement("div",null,r.a.createElement(k.a,{exact:!0,path:"/",render:function(){return r.a.createElement(O,{currentlyReading:t,wantToRead:a,read:n})}}),r.a.createElement(k.a,{path:"/search",render:function(){return r.a.createElement(T,{shelfedBooks:o})}}))}}]),t}(n.Component);a(37);c.a.render(r.a.createElement(l.a,null,r.a.createElement(I,null)),document.getElementById("root"))},8:function(e,t,a){}},[[26,2,1]]]);
//# sourceMappingURL=main.e1799bdb.chunk.js.map